#### 用途  
整理思路  

______

### 数据结构  
node是ptr与member指针的键值对  
ptr是node的指针  
member内含有一个ptr  

### 语法  
以lisp语法为基础  
`•a=b`用于声明一个常量a并初始化其为b  
`•a`允许将a的值于此之后定义，在此之前a的缺省值为新构造的node  
允许b表达式含有a的情况，如：`•a=(a)`  

`@a=b`用于声明一个变量a并初始化其为b  
`@a`等价于`@a=nil`  
使用未声明的量时自动声明其为变量并初始化其为nil，同时发出警告  

重复声明量时：
若是重复声明常量且值与其现有值强相等则没有问题  
若重复声明变量，声明的值必须与变量当前值相同，此机制被称为断言
其他情况一律引起错误  
>>	Q:常见的是，声明和修改分为两部分，遇到声明则加入符号表，遇到使用或者修改则检查表并修改对应项。  
	这里是要说“重复则必须相同”想到的是可以避免不同类型的同名冲突，但是值也必须相同，是要pure func吗？这样该多不方便，准备像haskell一样拿很多电线在盒子里传来传去吗？ scheme也有赋值的(set)
	电线传来传去 见：https://www.yinwang.org/blog-cn/2013/03/31/purely-functional  

>>	A:与haskell不同，elc更加混沌  
	我们设计的语言基于交互式顶层，这意味着变量可以在读入代码时被改变  
	比如以下代码  
	```elc
	@a=nil
	//...
	a=(func a)
	//...
	a=!a
	@a=t
	//...
	#a
	```
	这三段省略号中a的值是完全不同的  
	也就是说，变量在读入程序的过程中也可以被修改，这时引入断言机制就可以保证程序按自己预期的方式被执行  
	一旦断言失误，顶层便会报错  
	这有利于在运行前发现程序的bug  

而`#a`用于表明一个量不再有效，并且拥有符号a的效果  
>>	Q:不再有效是什么意思，类似c的define下面的undef吗？准备用“不再有效”来触发gc？还是达到名字复用？不懂其他fp语言的特点，暂挂起。  

>>	A:是的，为了名称复用  

例如`•a=t`后，  
`a==#a`如同`t==t`，其值为t，并在此之后a这个量不再存在  
而`#a==a`如同`t==nil`，其值为nil，并且会引发一个使用未声明量的警告  

`a:b...`是`(arec a b...)`的缩写  
>>	Q:大多数fp语言都这样。。  

>>	A:在此之前我没听过fp语言，这是我个人从era系列18🈲游戏代码使用的语言里获得的灵感（指照抄  

如`name:player:size`是`(arec name player size)`的缩写，等价于`(arec (arec name player) size)`	
>>	Q:为啥要括号外面一个size,前缀表达式不香吗  

>>	A:这里只是等价写法  

`a...=b`是`(set b a...)`的缩写  
>>	Q:语法糖什么的单独写，把文法构建跟这些在其之上的仅仅为了方便书写的语法糖分开写不好吗，不然大家会抓不住语言的核心。

>>	A:我们认为语法糖也是文法的一部分。  

如`a=b=c`等价于`(set c a b)`，等价于`(set (set c a) b)`  
>>	Q:跟 #L61 一样了，区别是arec<->: set<-> =  

>>	A:是的。  

`a?b,c`等价于`(if a b c)`   
>>	Q:这跟c语言唯一的三元表达式有冲突吧，以及，这里的(if a b c)的返回值是什么？要不要写清楚？如果a,b,c不是值而是表达式呢？建议参考 https://docs.racket-lang.org/guide/conditionals.html#%28part._.Simple_.Branching__if%29 的写法  

>>	A:`(if a b c)`：if是自带的函数，其取第一个参数并eval：  
	若bool意义上为true，则eval b并返回结果  
	若bool意义上为false，则eval c并返回结果  
	若bool意义上既true又false，则对b c都进行eval并返回其结果的纠缠值，执行顺序为先c后b  
	若bool意义上既非true又非false，则返回void  

`~a`是`(destroy a)`的缩写  
`!a`是`(not a)`的缩写  

`|`与`|`之间的部分将被当作整个符号看待，如：  
`|data size|`是一个符号，而`data size`是两个  
>>	Q:csharp的{}对吧 https://docs.microsoft.com/en-us/dotnet/standard/base-types/composite-formatting  

>>	A:与其说是Format，更像是转义序列  
	不过两者差别不大貌似  
	233  

`|`与`|`之间的`||`连起来时，将被转义为`|`  
>>	Q:csharp有类似的，为的是处理字符串文件夹路径时候方便点,这里这么设计是为啥？  

>>	A:为了能取任何名称作符号(。・∀・)ノ  

如`||||`是一个符号，内容为`|`  
`||`是特殊符号，其每次出现都会被替换为新构造的node  
如：`@a=||`  
等价于：  
```
@a
(set (new_node) a)
```

>>	Q:最后，想看类似虎书附录：tiger语言参考手册 那种风格的语言说明，这样写的乱糟糟的。  

>>	A:好的，在高考完后会参考的  
	这只是非正式的草稿，为的是理清思路  

>>	Q:为什么你萌的代码都不喜欢加空格.  

>>	A:风格原因  
